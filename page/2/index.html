<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>洛语 の Blog</title><meta name="author" content="LuoYu-Ying"><meta name="copyright" content="LuoYu-Ying"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta property="og:type" content="website">
<meta property="og:title" content="洛语 の Blog">
<meta property="og:url" content="https://luoyu-ying.github.io/page/2/index.html">
<meta property="og:site_name" content="洛语 の Blog">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://luoyu-ying.github.io/img/default-cover.jpg">
<meta property="article:author" content="LuoYu-Ying">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://luoyu-ying.github.io/img/default-cover.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://luoyu-ying.github.io/page/2/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":180,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '洛语 の Blog',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2022-05-12 22:02:18'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/post-transparent.css"><style>#article-container.post-content h1:before, h2:before, h3:before, h4:before, h5:before, h6:before { -webkit-animation: avatar_turn_around 1s linear infinite; -moz-animation: avatar_turn_around 1s linear infinite; -o-animation: avatar_turn_around 1s linear infinite; -ms-animation: avatar_turn_around 1s linear infinite; animation: avatar_turn_around 1s linear infinite; }</style><link rel="stylesheet" href="/css/white-code-box.css"><link rel="stylesheet" href="/css/background.css"><meta name="generator" content="Hexo 6.1.0"><link rel="alternate" href="/atom.xml" title="洛语 の Blog" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/default-cover.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">19</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">17</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 日常</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友人帐</span></a></div><div class="menus_item"><a class="site-page" href="/toolbox/"><i class="fa-fw fas fa-box"></i><span> 工具箱</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/LuoYu-Ying/Blog_img/index_img.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">洛语 の Blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 日常</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友人帐</span></a></div><div class="menus_item"><a class="site-page" href="/toolbox/"><i class="fa-fw fas fa-box"></i><span> 工具箱</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">洛语 の Blog</h1><div id="site-subtitle"><span id="subtitle"></span></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2022/04/20/JVM-%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA%E5%9F%9F/" title="JVM  运行时数据区域"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/LuoYu-Ying/Blog_img/あさひ＠クロイ ID=60141148.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JVM  运行时数据区域"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/04/20/JVM-%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA%E5%9F%9F/" title="JVM  运行时数据区域">JVM  运行时数据区域</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-04-19T19:17:20.000Z" title="发表于 2022-04-20 03:17:20">2022-04-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/JVM/">JVM</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/JVM/">JVM</a></span></div><div class="content">
  graph 

subgraph 运行时数据区
    subgraph 线程共享
        方法区
        堆
    end

    subgraph 线程私有
        虚拟机栈
        程序计数器
        本地方法栈
    end
end
  

 线程私有内存
 程序计数器(Program Counter Register)
程序计数器可以看作是当前线程所执行的字节码的行号指示器。
字节码解释器工作是就是通过改变程序计数器的值来选取下一条需要执行的字节码指令（执行本地方法的时候，程序计数器的值为 null）。
每条线程都需要有一个独立的程序计数器，各条的程序计数器互不影响，独立存储。
此内存区域是唯一一个没有规定任何 OutOfMemoryError 情况的区域。
 Java 虚拟机栈(VM Stack)
Java 虚拟机栈为虚拟机执行 Java 方法服务。
Java 虚拟机栈的生命周期和线程相同。
虚拟机栈描述的是 Java 方法执行的线程内存模型：每个方法被执行的时候，Java 虚拟机都会在虚拟机栈中同步创建一个栈帧用于存储局 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/04/19/JVM-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6/" title="JVM 类加载机制"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/LuoYu-Ying/Blog_img/id=53474510.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JVM 类加载机制"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/04/19/JVM-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6/" title="JVM 类加载机制">JVM 类加载机制</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-04-19T07:22:30.000Z" title="发表于 2022-04-19 15:22:30">2022-04-19</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/JVM/">JVM</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Java/">Java</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/JVM/">JVM</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Class-Loading/">Class Loading</a></span></div><div class="content"> 引言
Java 语言的类型可以分为两个大类：基本类型和引用类型。
其中的引用类型，Java 又将其细分为了四种：类、接口、数组类以及泛型参数。
其中，泛型参数会在编译过程中被擦除，数组类则是由 Java 虚拟机直接在内存中动态构造出来的。所以我们只讨论类和接口的加载过程。


  graph LR

subgraph 类加载过程 
    subgraph 链接
        验证 --&gt; 准备 --&gt; 解析
    end
    加载 --&gt; 验证
    解析 --&gt; 初始化
end
  

 触发类加载的条件（主动加载）


遇到 new，getstatic，putstatic 或 invokestatic 这4条字节码指令时，如果类没有进行过初始化，则需要先触发初始化。
生成这4条指令的最常见的Java代码场景是：

使用new关键字实例化对象的时候
读取或设置一个类的静态字段的时候
调用一个类的静态方法的时候



使用 java.lang.reflect 包的方法对类进行反射调用的时候。


当初始化一个类的时候，发现其父类还没有进行过初始化， ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/04/18/View-%E7%9A%84%E7%BB%98%E5%88%B6%E5%8E%9F%E7%90%86/" title="View 的绘制原理"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/LuoYu-Ying/Blog_img/id=46014079(oright).jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="View 的绘制原理"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/04/18/View-%E7%9A%84%E7%BB%98%E5%88%B6%E5%8E%9F%E7%90%86/" title="View 的绘制原理">View 的绘制原理</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-04-18T13:49:55.000Z" title="发表于 2022-04-18 21:49:55">2022-04-18</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Android/">Android</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Android/%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/">源码解析</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Android/">Android</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/View/">View</a></span></div><div class="content"> 基本概念
 ViewRoot
ViewRoot对应于ViewRootImpl类，它是连接WindowManager和DecorView的纽带。View的三大流程都是通过ViewRoot来完成的。
在ActivityThread中，当Activity对象被创建完毕后，会将DecorView添加到Window中，同时也会创建ViewRootImpl对象，并将ViewRootImpl对象与DecorView建立关联。
 View的三大绘制流程
View的绘制流程主要有measure、layout和draw过程。

measure：用来确定View的测量宽高。
layout：用来确定View的最终宽高以及四个顶点的位置。
draw：将View绘制在屏幕上。


View的绘制流程由ViewRoot的performTraversals方法开始。
performTraversals方法会依次调用performMeasure、performLayout、performDraw方法。这三个方法会分别完成顶层View的measure、layout、draw过程。
其中、performMeasure方法 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/04/18/hello-world/" title="Hello World"><img class="post_bg" src="/img/default-cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hello World"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/04/18/hello-world/" title="Hello World">Hello World</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-04-18T12:27:13.950Z" title="发表于 2022-04-18 20:27:13">2022-04-18</time></span></div><div class="content">Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.
 Quick Start
 Create a new post
1$ hexo new &quot;My New Post&quot;
More info: Writing
 Run server
1$ hexo server
More info: Server
 Generate static files
1$ hexo generate
More info: Generating
 Deploy to remote sites
1$ hexo deploy
More info: Deployment
</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/04/17/Android-%E5%8A%A8%E7%94%BB%E6%B7%B1%E5%85%A5%E5%88%86%E6%9E%90/" title="Android 动画深入分析"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/LuoYu-Ying/Blog_img/id=55325876(loundraw).jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Android 动画深入分析"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/04/17/Android-%E5%8A%A8%E7%94%BB%E6%B7%B1%E5%85%A5%E5%88%86%E6%9E%90/" title="Android 动画深入分析">Android 动画深入分析</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-04-17T13:54:03.000Z" title="发表于 2022-04-17 21:54:03">2022-04-17</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Android/">Android</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Android/">Android</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Animation/">Animation</a></span></div><div class="content"> 动画的三个分类


View动画


帧动画


属性动画


 View动画
 四个动画效果
View动画的作用对象是View，它有四个动画效果：平移动画、缩放动画、旋转动画、透明度动画。
View动画的四个变化效果对应着Animation的四个子类：

平移动画：TranslateAnimation，XML中对应的标签为&lt;translate&gt;
缩放动画：ScaleAnimation，XML中对应的标签为&lt;scale&gt;
旋转动画：RotateAnimation，XML中对应的标签为&lt;rotate&gt;
透明度动画：AlphaAnimation，XML中对应的标签为&lt;alpha&gt;

 &lt;set&gt;标签
&lt;set&gt;标签表示动画的集合，对应着AnimationSet类，其中可以包含着若干的动画，也可以有子动画。
标签有两个属性：

android:interpolator=&quot;@anim/...&quot;：选定集合所使用的插值器。
android:shareInterpolator=[&quot;true&quo ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/04/17/%E7%90%86%E8%A7%A3-Window-%E5%92%8C-WindowManager/" title="理解 Window 和 WindowManager [转载]"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/LuoYu-Ying/Blog_img/id=37311279(凹).jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="理解 Window 和 WindowManager [转载]"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/04/17/%E7%90%86%E8%A7%A3-Window-%E5%92%8C-WindowManager/" title="理解 Window 和 WindowManager [转载]">理解 Window 和 WindowManager [转载]</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-04-17T13:03:01.000Z" title="发表于 2022-04-17 21:03:01">2022-04-17</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Android/">Android</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Android/">Android</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Window/">Window</a></span></div><div class="content">
本文转载自：

Android源码-深入理解Window和WindowManager - 简书



 前言
Window 表示一个窗口的概念，Android中所有的视图都是通过Window来呈现的，不管是Activity、Dialog、还是Toast，它们的视图实际上都是附加在Window上的，因此，Window实际是View的管理者。Window是一个非常重要的子系统，这也是我们常说的WMS(WindowManagerService)。下面我们就分析一下Window、WMS、View建立关联以及交互的一个基本过程。
 Window体系相关UML类图


Session :是一个Binder对象，代表一个活跃的客户端会话，在每个进程中都有一个
Session 与 WindowManager 交互的对象。
WindowManagerService ：也是一个Binder对象，负责对窗口的管理。
Window ：应用程序用来与窗口管理器交谈的界面。
PhoneWindow ： Window 的具体实现。
WindowManagerImpl ： 负责与系统窗口管理器通信、绑定到上下文、显 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/04/16/Drawable-%E8%A7%A3%E6%9E%90/" title="Drawable 解析"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/LuoYu-Ying/Blog_img/pic6.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Drawable 解析"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/04/16/Drawable-%E8%A7%A3%E6%9E%90/" title="Drawable 解析">Drawable 解析</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-04-16T10:19:43.000Z" title="发表于 2022-04-16 18:19:43">2022-04-16</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Android/">Android</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Android/">Android</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Drawable/">Drawable</a></span></div><div class="content"> 基本概念
Drawable是一个抽象类，表示的是一个图像的概念。每一个具体的Drawable都是其子类。
优点：

使用简单，比自定义View的成本要低。
非图片类型的Drawable占用空间较小，可以有效的减少apk的大小。

内部宽/高：
Drawable有个参数比较重要，就是内部宽/高，通过getIntrinsicWidth和getIntrinsicHeight方法获得。
但是并不是所有的Drawable都有这两个参数，比如纯颜色的Drawable就没有内部宽/高的概念，它的两个值都为-1，它的大小就是View的大小，而图片类型的Drawable的内部宽/高决定了这个图片的固定大小。
 Drawable的分类
Drawable的子类有许多，这里简单的说几个，具体的参数参考《Android开发艺术探索》Page 244。


BitmapDrawable
表示一张图片。


NinePatchDrawable
表示一个.9格式的图片。


ShapeDrawable
表示通过颜色（纯色、渐变色）来表示的图形。


LayerDrawable
XML中的标签为&lt;layer-l ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/04/16/ThreadLocal-%E8%A7%A3%E6%9E%90-%E8%BD%AC%E8%BD%BD/" title="ThreadLocal 解析 [转载]"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/LuoYu-Ying/Blog_img/id=66934796(Y_Y).jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ThreadLocal 解析 [转载]"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/04/16/ThreadLocal-%E8%A7%A3%E6%9E%90-%E8%BD%AC%E8%BD%BD/" title="ThreadLocal 解析 [转载]">ThreadLocal 解析 [转载]</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-04-16T10:19:43.000Z" title="发表于 2022-04-16 18:19:43">2022-04-16</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Android/">Android</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Android/%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/">源码解析</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Android/">Android</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/ThreadLocal/">ThreadLocal</a></span></div><div class="content">
本文转载自：

Android进阶知识：ThreadLocal - Android架构



 ThreadLocal是什么？
ThreadLocal是一个线程内部数据存储类，通过他可以在指定的线程中存储数据。存储后，只能在指定的线程中获取到存储的数据，对其他线程来说无法获取到数据。
 ThreadLocal的使用场景
日常使用场景不多，当某些数据是以线程为作用域并且不同线程具有不同的数据副本的时候，可以考虑使用ThreadLocal。 Android源码的Lopper、ActivityThread以及AMS中都用到了ThreadLocal。
 ThreadLocal的使用示例
1234567891011121314151617181920212223public class ThreadLocalActivity extends AppCompatActivity &#123;private ThreadLocal&lt;String&gt; name = new ThreadLocal&lt;&gt;();@Overrideprotected void onCreate(Bund ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/04/16/Handler-%E6%9C%BA%E5%88%B6%E8%A7%A3%E6%9E%90/" title="Handler 机制解析"><img class="post_bg" src="https://cdn.jsdelivr.net/gh/LuoYu-Ying/Blog_img/pic10.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Handler 机制解析"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/04/16/Handler-%E6%9C%BA%E5%88%B6%E8%A7%A3%E6%9E%90/" title="Handler 机制解析">Handler 机制解析</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-04-16T05:39:55.000Z" title="发表于 2022-04-16 13:39:55">2022-04-16</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Android/">Android</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Android/%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/">源码解析</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Android/">Android</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/Handler/">Handler</a></span></div><div class="content">
本文整理自：

《Android 开发艺术探索》
Handler sendMessageDelayed()/postDelayed()机制详解
主线程中的Looper.loop()为什么不会造成ANR
Android Handler引发内存泄露★★★



 Handler机制组成部分
Hanler机制中的几个重要的组成部分：



组件
作用




ThreadLocal
将消息转存入其他指定的线程中


MessageQueue
消息队列，用于存储当前线程的转存入的消息


Looper
消息循环，不断的监控消息队列并从其中取出消息并处理


Handler
负责发送消息以及处理消息



 使用方法


常用于在其他线程中处理UI操作。


在处理消息的线程中定义一个Handler，若该线程中没有定义Looper，则需要先定义Looper，否则会报错。其中主线程的Looper已在启动的时候默认加载了，所以在主线程中无需先定义Looper。


当在其中线程中需要进行UI操作的时候，需要在该线程中使用主线程的Handler变量的sendMessage方法或者post方法。


 ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/default-cover.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">LuoYu-Ying</div><div class="author-info__description">春有百花秋有月  夏有凉风冬有雪 <br> 若无闲事挂心头  便是人间好时节</div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">19</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">17</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/LuoYu-Ying"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/05/11/OkHttp-%E8%A7%A3%E6%9E%90-%E8%BD%AC%E8%BD%BD/" title="OkHttp 解析 [转载]"><img src="https://cdn.jsdelivr.net/gh/LuoYu-Ying/Blog_img/a15b4afegy1fmvj0pw5l0j21hc0u0af6.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="OkHttp 解析 [转载]"/></a><div class="content"><a class="title" href="/2022/05/11/OkHttp-%E8%A7%A3%E6%9E%90-%E8%BD%AC%E8%BD%BD/" title="OkHttp 解析 [转载]">OkHttp 解析 [转载]</a><time datetime="2022-05-10T16:41:06.000Z" title="发表于 2022-05-11 00:41:06">2022-05-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/05/08/cpp-%E4%B8%8D%E5%90%8C%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-scanf-%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E5%86%99%E6%B3%95/" title="c++ 不同数据类型 scanf 输入输出写法"><img src="https://cdn.jsdelivr.net/gh/LuoYu-Ying/Blog_img/007YMVZbgy1gmk1eyw7ywj30rs0jsjwc.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="c++ 不同数据类型 scanf 输入输出写法"/></a><div class="content"><a class="title" href="/2022/05/08/cpp-%E4%B8%8D%E5%90%8C%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-scanf-%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E5%86%99%E6%B3%95/" title="c++ 不同数据类型 scanf 输入输出写法">c++ 不同数据类型 scanf 输入输出写法</a><time datetime="2022-05-08T15:28:06.000Z" title="发表于 2022-05-08 23:28:06">2022-05-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/04/28/K%E7%9F%AD%E8%B7%AF%E6%A8%A1%E6%9D%BF/" title="K 短路模板"><img src="https://cdn.jsdelivr.net/gh/LuoYu-Ying/Blog_img/cc9a0367d0160924cc0b0154c30735fae6cd343f.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="K 短路模板"/></a><div class="content"><a class="title" href="/2022/04/28/K%E7%9F%AD%E8%B7%AF%E6%A8%A1%E6%9D%BF/" title="K 短路模板">K 短路模板</a><time datetime="2022-04-28T11:49:23.000Z" title="发表于 2022-04-28 19:49:23">2022-04-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/04/28/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%93%88%E5%B8%8C/" title="字符串哈希"><img src="https://cdn.jsdelivr.net/gh/LuoYu-Ying/Blog_img/007YMVZbgy1gmk0eknrqnj316h0x2qa3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="字符串哈希"/></a><div class="content"><a class="title" href="/2022/04/28/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%93%88%E5%B8%8C/" title="字符串哈希">字符串哈希</a><time datetime="2022-04-28T11:49:23.000Z" title="发表于 2022-04-28 19:49:23">2022-04-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/04/27/View-%E7%9A%84%E4%BA%8B%E4%BB%B6%E4%BD%93%E7%B3%BB/" title="View 的事件体系"><img src="https://cdn.jsdelivr.net/gh/LuoYu-Ying/Blog_img/id=2318466(じむ(kaji).jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="View 的事件体系"/></a><div class="content"><a class="title" href="/2022/04/27/View-%E7%9A%84%E4%BA%8B%E4%BB%B6%E4%BD%93%E7%B3%BB/" title="View 的事件体系">View 的事件体系</a><time datetime="2022-04-27T11:49:25.000Z" title="发表于 2022-04-27 19:49:25">2022-04-27</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Android/"><span class="card-category-list-name">Android</span><span class="card-category-list-count">8</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Android/%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"><span class="card-category-list-name">源码解析</span><span class="card-category-list-count">5</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/JVM/"><span class="card-category-list-name">JVM</span><span class="card-category-list-count">3</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/"><span class="card-category-list-name">Java</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Markdown/"><span class="card-category-list-name">Markdown</span><span class="card-category-list-count">1</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Markdown/mermaid/"><span class="card-category-list-name">mermaid</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/XCPC/"><span class="card-category-list-name">XCPC</span><span class="card-category-list-count">4</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/XCPC/%E5%85%B6%E4%BB%96/"><span class="card-category-list-name">其他</span><span class="card-category-list-count">2</span></a></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/Android/" style="font-size: 1.5em; color: #99a9bf">Android</a> <a href="/tags/Animation/" style="font-size: 1.1em; color: #999">Animation</a> <a href="/tags/Class-Loading/" style="font-size: 1.1em; color: #999">Class Loading</a> <a href="/tags/Drawable/" style="font-size: 1.1em; color: #999">Drawable</a> <a href="/tags/GC/" style="font-size: 1.1em; color: #999">GC</a> <a href="/tags/Handler/" style="font-size: 1.1em; color: #999">Handler</a> <a href="/tags/JVM/" style="font-size: 1.3em; color: #99a1ac">JVM</a> <a href="/tags/Java/" style="font-size: 1.4em; color: #99a5b6">Java</a> <a href="/tags/OkHttp/" style="font-size: 1.1em; color: #999">OkHttp</a> <a href="/tags/ThreadLocal/" style="font-size: 1.1em; color: #999">ThreadLocal</a> <a href="/tags/View/" style="font-size: 1.2em; color: #999da3">View</a> <a href="/tags/Window/" style="font-size: 1.1em; color: #999">Window</a> <a href="/tags/XCPC/" style="font-size: 1.4em; color: #99a5b6">XCPC</a> <a href="/tags/ikbc/" style="font-size: 1.1em; color: #999">ikbc</a> <a href="/tags/markdown/" style="font-size: 1.1em; color: #999">markdown</a> <a href="/tags/mermaid/" style="font-size: 1.1em; color: #999">mermaid</a> <a href="/tags/%E5%9B%BE%E8%AE%BA/" style="font-size: 1.1em; color: #999">图论</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/05/"><span class="card-archive-list-date">五月 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/04/"><span class="card-archive-list-date">四月 2022</span><span class="card-archive-list-count">17</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">19</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2022-04-13T16:00:00.000Z"></div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2022-05-12T14:02:17.700Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By LuoYu-Ying</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">本地搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function subtitleType () {
  if (true) { 
    window.typed = new Typed("#subtitle", {
      strings: ["我们所经历的每个平凡的日常，也许就是连续发生的奇迹。","日々私たちが過ごしている日常は、実は、奇跡の連続なのかもしれない。"],
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50
    })
  } else {
    document.getElementById("subtitle").innerHTML = '我们所经历的每个平凡的日常，也许就是连续发生的奇迹。'
  }
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}</script><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>